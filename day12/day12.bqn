lines ← •file.Lines "./day12.txt"
map ← > {27 ⌊ | 48 - 𝕩×𝕩 ≥ 49}(-⟜'0') ¨ lines
idx ← /○⥊⟜(↕≢) (27 = map)
s ← 0 ⊑ idx
e ← 1 ⊑ idx
m ← 0˙⌾(s⊸⊑) map
⟨r,c⟩ ← ≢ m

Cross ← { up ← 𝕩 - ⟨1,0⟩
        ⋄ dn ← 𝕩 + ⟨1,0⟩
        ⋄ le ← 𝕩 - ⟨0,1⟩
        ⋄ ri ← 𝕩 + ⟨0,1⟩
        ⋄ ⍷ (⟨(r-1),(c-1)⟩⊸⌊)¨(⟨0,0⟩⊸⌈)¨up‿dn‿le‿ri
        }

Step ← { a ← 𝕩
       ⋄ x ← ⊑ 𝕩
       ⋄ i ← x ⊑ m
       ⋄ p ← Cross x
       ⋄ d ← /⟜p˜{¬∨´𝕩⊸ ≡¨a}¨p
       ⋄ n ← (⊑ ⟜ d) ˜ ⊑ / {((i-1)=𝕩)∨(i=𝕩)}¨d ⊑ m
       ⋄ (¬s≡n) ? 𝕊 (⋈ n)∾ 𝕩 ; ⊑ ≢ 𝕩
       }

p ← Step ⋈ e 

•Out "Puzzle 1: "∾(•Fmt p)
